  <h1>Hangman</h1>

  <button onclick="newGame()">New Game</button>

  <pre id="id"></pre>
  <pre id="gameState"></pre>

  <script>
    async function newGame() {
      const newGameRes = await fetch('/game/new', {
        method: 'POST',
        headers: { 'X-CSRFToken': getCookie('csrftoken') }
      });
      const newGameData = await newGameRes.json();
      document.getElementById('id').textContent = JSON.stringify(newGameData, null, 2);

      const stateRes = await fetch(`/game/${newGameData.id}`);
      const stateData = await stateRes.json();
      document.getElementById('gameState').textContent = JSON.stringify(stateData, null, 2);
    }

    function getCookie(name) {
      const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
      return match ? match[2] : '';
    }
  </script>
</body>